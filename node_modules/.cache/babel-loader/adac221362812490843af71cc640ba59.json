{"ast":null,"code":"import _objectSpread from\"C:/Users/piotr/Desktop/Kodilla/28. Projekt ko\\u0144cowy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/Users/piotr/Desktop/Kodilla/28. Projekt ko\\u0144cowy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{API_URL}from'../config';import Axios from'axios';/* selectors */export var getCartData=function getCartData(_ref){var cart=_ref.cart;return cart;};/* action name creator */var reducerName='cart';var createActionName=function createActionName(name){return\"app/\".concat(reducerName,\"/\").concat(name);};/* action types */var FETCH_START=createActionName('FETCH_START');var FETCH_ERROR=createActionName('FETCH_ERROR');var ADD_TO_CART=createActionName('ADD_TO_CART');var CHANGE_QUANTITY=createActionName('CHANGE_QUANTITY');var REMOVE_FROM_CART=createActionName('REMOVE_FROM_CART');var CHANGE_DESCRIPTION=createActionName('CHANGE_DESCRIPTION');var FETCH_SUCCESS=createActionName('FETCH_SUCCESS');/* action creators */export var fetchStarted=function fetchStarted(payload){return{payload:payload,type:FETCH_START};};export var fetchError=function fetchError(payload){return{payload:payload,type:FETCH_ERROR};};export var addToCart=function addToCart(payload){return{payload:payload,type:ADD_TO_CART};};export var changeQuantity=function changeQuantity(payload){return{payload:payload,type:CHANGE_QUANTITY};};export var removeFromCart=function removeFromCart(payload){return{payload:payload,type:REMOVE_FROM_CART};};export var changeDescription=function changeDescription(payload){return{payload:payload,type:CHANGE_DESCRIPTION};};export var fetchSuccess=function fetchSuccess(payload){return{payload:payload,type:FETCH_SUCCESS};};/* thunk creators */export var fetchCart=function fetchCart(data){return function(dispatch,getState){if(getState().cart.length>0){localStorage.setItem('cart',JSON.stringify(data));}if(getState().cart.length===0){var cartProductsLocalStorage=JSON.parse(localStorage.getItem('cart'));if(cartProductsLocalStorage!==null){dispatch(fetchSuccess(cartProductsLocalStorage));}}};};/* reducer */export var reducer=function reducer(){var statePart=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var action=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};switch(action.type){case CHANGE_QUANTITY:{return _toConsumableArray(statePart.map(function(data){if(data.id===action.payload.id){data.quantity=action.payload.quantity;return data;}else{return data;}}));}case CHANGE_DESCRIPTION:{return _toConsumableArray(statePart.map(function(data){if(data.id===action.payload.id){data.description=action.payload.description;return data;}else{return data;}}));}case ADD_TO_CART:{if(statePart.length>0){var x=false;statePart.map(function(data){if(data.color===action.payload.color&&data.name===action.payload.name){x=true;data.quantity+=action.payload.quantity;return data;}});return x?statePart:[].concat(_toConsumableArray(statePart),[action.payload]);}else{return[action.payload];}}case REMOVE_FROM_CART:{return _toConsumableArray(statePart.filter(function(data){return data.id!==action.payload;}));}case FETCH_SUCCESS:{return action.payload;}case FETCH_START:{return _objectSpread(_objectSpread({},statePart),{},{loading:{active:true,error:false}});}case FETCH_ERROR:{return _objectSpread(_objectSpread({},statePart),{},{loading:{active:false,error:action.payload}});}default:return statePart;}};","map":{"version":3,"sources":["C:/Users/piotr/Desktop/Kodilla/28. Projekt koÅ„cowy/src/redux/cartRedux.js"],"names":["API_URL","Axios","getCartData","cart","reducerName","createActionName","name","FETCH_START","FETCH_ERROR","ADD_TO_CART","CHANGE_QUANTITY","REMOVE_FROM_CART","CHANGE_DESCRIPTION","FETCH_SUCCESS","fetchStarted","payload","type","fetchError","addToCart","changeQuantity","removeFromCart","changeDescription","fetchSuccess","fetchCart","data","dispatch","getState","length","localStorage","setItem","JSON","stringify","cartProductsLocalStorage","parse","getItem","reducer","statePart","action","map","id","quantity","description","x","color","filter","loading","active","error"],"mappings":"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","sourcesContent":["import { API_URL } from '../config';\nimport Axios from 'axios';\n\n/* selectors */\nexport const getCartData = ({ cart }) => cart;\n\n/* action name creator */\nconst reducerName = 'cart';\nconst createActionName = name => `app/${reducerName}/${name}`;\n\n/* action types */\nconst FETCH_START = createActionName('FETCH_START');\nconst FETCH_ERROR = createActionName('FETCH_ERROR');\nconst ADD_TO_CART = createActionName('ADD_TO_CART');\nconst CHANGE_QUANTITY = createActionName('CHANGE_QUANTITY');\nconst REMOVE_FROM_CART = createActionName('REMOVE_FROM_CART');\nconst CHANGE_DESCRIPTION = createActionName('CHANGE_DESCRIPTION');\nconst FETCH_SUCCESS = createActionName('FETCH_SUCCESS');\n\n/* action creators */\nexport const fetchStarted = payload => ({ payload, type: FETCH_START });\nexport const fetchError = payload => ({ payload, type: FETCH_ERROR });\nexport const addToCart = payload => ({ payload, type: ADD_TO_CART });\nexport const changeQuantity = payload => ({ payload, type: CHANGE_QUANTITY });\nexport const removeFromCart = payload => ({ payload, type: REMOVE_FROM_CART });\nexport const changeDescription = payload => ({ payload, type: CHANGE_DESCRIPTION });\nexport const fetchSuccess = payload => ({ payload, type: FETCH_SUCCESS });\n\n/* thunk creators */\nexport const fetchCart = (data) => {\n  return (dispatch, getState) => {\n    if (getState().cart.length > 0) {\n      localStorage.setItem('cart', JSON.stringify(data));\n    } if (getState().cart.length === 0) {\n      const cartProductsLocalStorage = JSON.parse(localStorage.getItem('cart'));\n      if (cartProductsLocalStorage !== null) {\n        dispatch(fetchSuccess(cartProductsLocalStorage))\n      }\n    }\n  };\n};\n\n\n/* reducer */\nexport const reducer = (statePart = [], action = {}) => {\n  switch (action.type) {\n    case CHANGE_QUANTITY: {\n      return [...statePart.map(data => {\n        if (data.id === action.payload.id) {\n          data.quantity = action.payload.quantity;\n          return data;\n        } else {\n          return data;\n        }\n      })]\n    }\n    case CHANGE_DESCRIPTION: {\n      return [...statePart.map(data => {\n        if (data.id === action.payload.id) {\n          data.description = action.payload.description;\n          return data;\n        } else {\n          return data;\n        }\n      })]\n    }\n    case ADD_TO_CART: {\n      if (statePart.length > 0) {\n        let x = false;\n\n        statePart.map(data => {\n          if (data.color === action.payload.color && data.name === action.payload.name) {\n            x = true;\n            data.quantity += action.payload.quantity;\n            return data;\n          }\n        })\n        return x ? statePart : [...statePart, action.payload];\n      } else {\n        return [action.payload]\n      }\n    }\n    case REMOVE_FROM_CART: {\n      return [...statePart.filter(data => data.id !== action.payload)]\n    }\n    case FETCH_SUCCESS: {\n      return action.payload\n    }\n    case FETCH_START: {\n      return {\n        ...statePart,\n        loading: {\n          active: true,\n          error: false,\n        },\n      };\n    }\n    case FETCH_ERROR: {\n      return {\n        ...statePart,\n        loading: {\n          active: false,\n          error: action.payload,\n        },\n      };\n    }\n    default:\n      return statePart;\n  }\n};"]},"metadata":{},"sourceType":"module"}